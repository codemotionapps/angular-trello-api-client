angular.module("trello-api-client",["satellizer"]),angular.module("trello-api-client").constant("TrelloClientConfig",{key:null,appName:null,authEndpoint:"https://trello.com",apiEndpoint:"https://api.trello.com",intentEndpoint:"https://trello.com",version:1,tokenExpiration:"never",scope:["read","write","account"],localStoragePrefix:"trello"}),angular.module("trello-api-client").factory("TrelloInterceptor",["$q","SatellizerConfig","SatellizerStorage","SatellizerShared","TrelloClientConfig",function(e,t,n,r,o){return{request:function(e){var i,l;return e.trelloRequest?(r.isAuthenticated()&&(l=t.tokenPrefix?t.tokenPrefix+"_"+t.tokenName:t.tokenName,i=n.get(l),null==e.params&&(e.params={}),e.params.key=o.key,e.params.token=i),e):e},responseError:function(t){return e.reject(t)}}}]).config(["$httpProvider",function(e){return e.interceptors.push("TrelloInterceptor")}]),angular.module("trello-api-client").provider("TrelloClient",function(e,t){this.init=function(n){return null!=n?(angular.extend(t,n),e.tokenPrefix=t.localStoragePrefix,e.httpInterceptor=function(e){return!1},e.oauth2({name:t.appName,key:t.key,returnUrl:window.location.origin,authorizationEndpoint:t.authEndpoint+"/"+t.version+"/authorize",defaultUrlParams:["response_type","key","return_url","expiration","scope","name"],requiredUrlParams:null,optionalUrlParams:null,scope:t.scope,scopeDelimiter:",",type:"redirect",popupOptions:t.popupOptions,responseType:"token",expiration:t.tokenExpiration})):void 0},this.$get=function(e,n,r,o){var i,l,a,u,p,c,s;for(l=t.apiEndpoint+"/"+t.version,i={},i.authenticate=function(){return o.authenticate(t.appName).then(function(e){return o.setToken(e.token)})},s=["get","post","put","delete"],a=function(e){return i[e]=function(t,r){return null==r&&(r={}),r.trelloRequest=!0,o.isAuthenticated()?n[e](l+t,r):void 0}},u=0,p=s.length;p>u;u++)c=s[u],a(c);return i}});
